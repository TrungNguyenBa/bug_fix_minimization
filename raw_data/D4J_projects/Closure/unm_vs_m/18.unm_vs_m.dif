2c2
< index 3756b99..8898f77 100644
---
> index 3756b998..cdea3b55 100644
5c5
< @@ -1285,7 +1285,7 @@ public class Compiler extends AbstractCompiler {
---
> @@ -1285,7 +1285,8 @@ public class Compiler extends AbstractCompiler {
10c10,11
< +      if (options.dependencyOptions.needsManagement() && options.closurePass) {
---
> +      if (options.dependencyOptions.needsManagement() &&
> +          options.closurePass) {
13a15,46
> diff --git a/test/com/google/javascript/jscomp/IntegrationTest.java b/test/com/google/javascript/jscomp/IntegrationTest.java
> index 8ae9fd9b..83480a1d 100644
> --- a/test/com/google/javascript/jscomp/IntegrationTest.java
> +++ b/test/com/google/javascript/jscomp/IntegrationTest.java
> @@ -2099,27 +2099,6 @@ public class IntegrationTest extends IntegrationTestCase {
>          "var x = {};");
>    }
>  
> -  public void testDependencySorting() throws Exception {
> -    CompilerOptions options = createCompilerOptions();
> -    options.setDependencyOptions(
> -        new DependencyOptions()
> -        .setDependencySorting(true));
> -    test(
> -        options,
> -        new String[] {
> -          "goog.require('x');",
> -          "goog.provide('x');",
> -        },
> -        new String[] {
> -          "goog.provide('x');",
> -          "goog.require('x');",
> -
> -          // For complicated reasons involving modules,
> -          // the compiler creates a synthetic source file.
> -          "",
> -        });
> -  }
> -
>    public void testStrictWarningsGuard() throws Exception {
>      CompilerOptions options = createCompilerOptions();
>      options.checkTypes = true;
